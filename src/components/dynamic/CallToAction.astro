---
import type { TypeComponentCTASkeleton } from "@lib/generated/contentful";
import Picture from "../Picture.astro";
import type { Asset, Entry } from "@lib/types";

interface Props extends Entry<TypeComponentCTASkeleton> {}

const {
  fields: { kicker, title, description, image, actionLabel, externalURL, page },
} = Astro.props;

const target = externalURL ? "_blank" : "_self";
const url = externalURL || page?.fields.slug;
---

{
  url && (
    <a
      target={target}
      href={url}
      class="-mx-4 px-4 py-4 gap-y-4 gap-x-8 cursor-pointer bg-tedGray no-underline flex flex-col lg:rounded-lg lg:flex-row lg:p-8 lg:m-0"
    >
      <Picture
        {...image!}
        class="object-cover w-full rounded-lg h-full"
        alt={image?.fields.title}
        width={420}
      />
      <div class="flex flex-col w-full lg:max-w-[60%]">
        <div>
          <h3 class="text-tedDarkWhite mb-4 lg:mb-3">{kicker}</h3>
          <h1 class="mb-4 lg:mb-6">{title}</h1>
          <p class="mb-6 lg:mb-8">{description}</p>
        </div>
        <div class="flex justify-end">
          <span class="link-underline link-underline--fixed no-underline">
            {actionLabel}&nbsp;â†’
          </span>
        </div>
      </div>
    </a>
  )
}
